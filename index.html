<style>
    body{
        font-family: 'Courier New', Courier, monospace;
        background-color: rgb(26, 26, 26);
        color: rgb(210, 240, 102);
    }

</style>

<h2 id="result">Carregando...</h2>
<div class="plus">
    <div id="d1"></div>
    <div id="d2"></div>
    <div id="d3"></div>
</div><br />

<script>
    // Constantes para URL e elementos DOM
    const apiUrl = 'https://freeipapi.com/api/json/';
    const resultElement = document.getElementById('result');
    const d1Element = document.getElementById('d1');
    const d2Element = document.getElementById('d2');
    const d3Element = document.getElementById('d3');

    // Função para atualizar a exibição dos elementos na página
    function atualizarExibicao(data) {
        if (data) {
            const ip = data.ipAddress;
            const cidade = data.cityName || 'Cidade desconhecida';
            const estado = data.regionName || 'Estado desconhecido';
            const pais = data.countryName || 'País desconhecido';

            resultElement.innerText = `${ip}`;
            d1Element.innerText = cidade;
            d2Element.innerText = estado;
            d3Element.innerText = pais;
        } else {
            resultElement.innerText = 'Não foi possível obter as informações do IP.';
        }
    }

    // Função para fazer a requisição HTTP
    function fazerRequisicao() {
        fetch(apiUrl)
            .then(response => {
                if (!response.ok) {
                    throw new Error('Erro na requisição. Verifique sua conexão com a internet.');
                }
                return response.json();
            })
            .then(data => {
                // Atualizar a exibição com os dados recebidos
                atualizarExibicao(data);
            })
            .catch(error => {
                // Lidar com erros da requisição aqui
                console.log(error);
                resultElement.innerText = 'Erro na requisição. Verifique sua conexão com a internet.';
            });
    }

    // Chamar a função automaticamente ao carregar a página
    window.onload = fazerRequisicao;
</script>
